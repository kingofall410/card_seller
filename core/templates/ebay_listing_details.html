{% load static %}

<style>
  .listing-fields-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 16px;
  }

  .listing-fields-table td {
    padding: 10px;
    background-color: #4c96d7;
    font-weight: bold;
    color: #fff;
    vertical-align: middle;
  }

  .listing-fields-table input[type="text"] {
    width: 100%;
    padding: 8px;
    font-size: 1em;
    border: none;
    border-radius: 4px;
    box-sizing: border-box;
  }

  .listing-fields-table input[disabled] {
    background-color: #e0e0e0;
    color: #555;
  }
</style>
<table class="listing-fields-table">
  <tr>
    <td><label for="field_list_price-{{ card_id }}">List Price</label></td>
    <td>
      <input type="text"
        id="field_list_price-{{ card_id }}"
        name="list_price"
        value="{{ search_result.list_price }}"
        data-default="{{ price }}"
        data-maxlength="80">
    </td>
    <td><label for="field_ebay_listing_id-{{ card_id }}">eBay Listing ID</label></td>
    <td>
      <input type="text"
        id="field_ebay_listing_id-{{ card_id }}"
        name="ebay_listing_id"
        value="{{ search_result.ebay_listing_id }}"
        data-default="{{ search_result.ebay_listing_id }}"
        data-maxlength="80"
        disabled>
    </td>
  </tr>
  <tr>
    <td><label for="field_sku-{{ card_id }}">SKU</label></td>
    <td>
      <input type="text"
        id="field_sku-{{ card_id }}"
        name="sku"
        value="{{ search_result.sku }}"
        data-default="{{ search_result.sku }}"
        data-maxlength="80"
        >
    </td>
    <td><label for="field_ebay_offer_id-{{ card_id }}">eBay Offer ID</label></td>
    <td>
      <input type="text"
        id="field_ebay_offer_id-{{ card_id }}"
        name="ebay_offer_id"
        value="{{ search_result.ebay_offer_id }}"
        data-default="{{ search_result.ebay_offer_id }}"
        data-maxlength="80"
        disabled>
    </td>
  </tr>
</table>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const priceElem = document.getElementById("selected-price")

  if (!priceElem) return;

  const observer = new MutationObserver(() => {
    const newVal = priceElem.dataset.shared;    
    const receiver = document.getElementsByName("list_price")[0];
    receiver.value = newVal
  });

  observer.observe(priceElem, { attributes: true });

  
  // Optional: also listen for input changes directly
  priceElem.addEventListener("input", () => {
    const newVal = priceElem.value;
    console.log("Input changed:", newVal);
  });
});


</script>
